<h1>ユーザーページ</h1>
<%= image_tag @user.get_profile_image %>
<% if @user == current_user %>
  <%= link_to 'マイプラン', edit_user_path(@user.id) %>
  <%= link_to 'いいね一覧', favorites_user_path(@user.id) %>
<% end %>

<table class="table">
  <tbody>
    <tr>
      <th>ユーザーネーム</th>
      <td><%= @user.name %> </td>
      <td><%= link_to @user.followings.count, followings_user_path(@user) %>フォロー <%= link_to @user.followers.count, followers_user_path(@user) %>フォロワー</td>
    </tr>
    <tr>
      <th>コメント</th>
      <td><%= @user.comment %></td>
    </tr>
    <% if @user == current_user %>
    <tr>
      <th>メールアドレス</th>
      <td><%= @user.email %></td>
    </tr>
    <tr>
      <th>生年月日</th>
      <td><%= @user.birth_of_date %></td>
    </tr>
    <tr>
      <th>非公開設定</th>
      <td>
        <% if @user.private_setting == false %>
          設定しない（公開）
        <% else @user.private_setting == true %>
          設定する（非公開）
        <% end %>
      </td>
    </tr>
    <tr>
      <th></th>
      <td><%= link_to '編集する', edit_user_path(@user.id) %></td>
    </tr>
    <% else %>
      <% if @user.is_followed_by?(current_user) %>
        <%= link_to user_relationships_path(@user), method: :delete do %>
          <button type="button" class="btn btn btn-primary">フォロー解除</button>
        <% end %>
      <% else %>
        <%= link_to user_relationships_path(@user), method: :post do %>
          <button type="button" class="btn btn btn-primary">フォロー</button>
        <% end %>
      <% end %>
    <% end %>
  </tbody>
</table>

<% @posts.each do |post| %>
<div>
  <%= link_to post_path(post.id) do %>
    <%= image_tag post.get_image %>
  <% end %>
  <%= link_to user_path(post.user.id) do %>
    <%= image_tag post.user.get_profile_image %> <%= post.user.name %>
  <% end %>
  <p><%= post.created_at.strftime('%Y/%m/%d') %></p>
  <%= link_to "#{post.post_comments.count} コメント", post_path(post.id) %></p>
</div>
<% end %>


